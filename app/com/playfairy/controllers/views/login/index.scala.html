@import com.playfairy.models._
@import com.playfairy.controllers.views.html.common._
@import play.api.mvc._
@import play.mvc.Http.Context.Implicit._ 

@(oUser: Option[Person])(implicit request: Request[Any], session: Session)
	
@mymain(oUser)("Login"){
	
	@{
		val sFailed = request.flash.get("failed").getOrElse("")
		if ( !sFailed.isEmpty ) {
			<h3>Login Failed</h3>
		}
	}
	
	@if(oUser.isDefined){
		@loginheader(oUser.map( u => u.username ).getOrElse(""))
		
		<p>
  			<a href="@com.playfairy.controllers.routes.LoginController.logout()"> Logout </a>
  		</p>
	} else{
		  <h1>Login</h1>
		  @helper.form( action = com.playfairy.controllers.routes.LoginController.login(), 'enctype -> "multipart/form-data") {
		  	Username: <input type="text" name="username"/><br><br>
		  	Password: <input type="text" name="password"/><br><br>
		  	<p>
		  		<input type="submit"/>
		  	</p>
  		  }
  	}
  	
  	<h5> test implicits </h5>
  	<h6>
  		@session.get("sessionId")
  		@* @session().get("sessionId").fold("no session")( sId => sId ) *@
  	</h6>
  	
  <!-- <p>
  <a href="@routes.Assets.versioned("images/favicon.png")">Play Icon</a>
  </p>
  -->
  <p>
  <!-- <a href="@routes.Assets.versioned("hardcoded.plist")">Download hardcoded ipa</a> -->
  <!--
  <h2>
  	<a href="https://10.6.0.18:9443/assets/ipa/hakimmbp.crt">Download server SSL certificate</a>
  </h2>
  -->
  <!-- <h2>
  	<a href="itms-services://?action=download-manifest&amp;url=https://10.6.0.18:9443/assets/hardcoded.plist">Download hardcoded ipa</a>
  </h2>
  -->
  </p>
}